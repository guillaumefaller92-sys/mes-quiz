<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mes Quiz</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --panel: rgba(14, 20, 45, .78);
      --panel2: rgba(255,255,255,.045);
      --line: rgba(255,255,255,.14);
      --line2: rgba(255,255,255,.10);
      --text:#e8eefc;
      --muted:#b7c2df;
      --muted2: rgba(183,194,223,.68);
      --good:#22c55e;
      --blue:#60a5fa;
      --violet:#a78bfa;
      --red:#fb7185;
      --shadow: 0 18px 70px rgba(0,0,0,.50);
      --shadow2: 0 14px 45px rgba(0,0,0,.42);
      --radius: 18px;
      --focus: 0 0 0 3px rgba(96,165,250,.26);
      --dockH: 74px;
      --dockGap: 16px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:26px;
      padding-bottom: calc(26px + var(--dockH) + var(--dockGap));
      background:
        radial-gradient(1100px 650px at 14% 10%, rgba(251,113,133,.20), transparent 60%),
        radial-gradient(1050px 650px at 88% 18%, rgba(96,165,250,.20), transparent 60%),
        radial-gradient(950px 650px at 55% 105%, rgba(34,197,94,.14), transparent 62%),
        linear-gradient(180deg, #050718, #080e24 55%, #050718);
      overflow-x:hidden;
      position:relative;
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.06;
      mix-blend-mode: overlay;
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.9'/%3E%3C/svg%3E");
    }

    .wrap{
      width:min(1120px, 100%);
      display:grid;
      gap:14px;
      position:relative;
      z-index:1;
    }

    .hero{
      text-align:center;
      padding:10px;
      display:grid;
      gap:7px;
    }

    h1{
      margin:0;
      font-family:"Press Start 2P", monospace;
      font-size:22px;
      line-height:1.25;
      letter-spacing:.4px;
      text-shadow: 0 10px 28px rgba(0,0,0,.55);
    }

    .sub{
      color:var(--muted2);
      font-size:13px;
    }

    .panel{
      background: var(--panel);
      border:1px solid var(--line);
      border-radius: 22px;
      box-shadow: var(--shadow);
      padding:16px;
      backdrop-filter: blur(12px);
      position:relative;
      overflow:hidden;
    }

    .panel::after{
      content:"";
      position:absolute;
      inset:-120px;
      background:
        radial-gradient(520px 320px at 18% 12%, rgba(255,255,255,.10), transparent 62%),
        radial-gradient(520px 320px at 88% 20%, rgba(167,139,250,.10), transparent 62%);
      pointer-events:none;
      opacity:.85;
    }

    /* ‚îÄ‚îÄ FILTRES ‚îÄ‚îÄ */
    .filters{
      position:relative;
      z-index:1;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      padding:12px;
      border:1px solid var(--line2);
      border-radius: 18px;
      background: rgba(0,0,0,.14);
      margin-bottom: 14px;
    }

    .filtersLeft{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
      flex-wrap:wrap;
    }

    .filtersLabel{
      font-weight:900;
      font-size:12px;
      color: var(--muted2);
      white-space:nowrap;
      letter-spacing:.2px;
    }

    .select{
      appearance:none;
      -webkit-appearance:none;
      -moz-appearance:none;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.07);
      color: var(--text);
      font-weight:900;
      border-radius: 14px;
      padding:10px 38px 10px 12px;
      outline:none;
      cursor:pointer;
      transition: transform .12s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
      max-width: min(320px, 70vw);
      color-scheme: dark;
      background-color: rgba(255,255,255,.07);
    }
    .select:hover{
      background: rgba(255,255,255,.11);
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.26);
    }
    .select:focus-visible{
      box-shadow: var(--focus);
      border-color: rgba(96,165,250,.45);
    }
    .select option{
      background-color: #0b1226;
      color: #e8eefc;
    }
    .select option:checked{
      background-color: #1a2b5a;
      color: #e8eefc;
    }

    .selectWrap{
      position:relative;
      display:inline-flex;
      align-items:center;
    }
    .selectWrap::after{
      content:"‚ñæ";
      position:absolute;
      right:12px;
      pointer-events:none;
      color: rgba(255,255,255,.75);
      font-size:14px;
      transform: translateY(-1px);
    }

    /* ‚îÄ‚îÄ ‚úÖ RECHERCHE ‚îÄ‚îÄ */
    .searchWrap{
      position:relative;
      display:inline-flex;
      align-items:center;
    }
    .searchWrap::before{
      content:"üîç";
      position:absolute;
      left:11px;
      font-size:13px;
      pointer-events:none;
      opacity:.65;
    }
    .searchInput{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.07);
      color: var(--text);
      font-weight:600;
      font-size:13px;
      border-radius: 14px;
      padding:10px 12px 10px 34px;
      outline:none;
      width: min(220px, 50vw);
      transition: background .15s ease, border-color .15s ease, box-shadow .15s ease, width .2s ease;
      color-scheme: dark;
    }
    .searchInput::placeholder{ color: var(--muted2); font-weight:600; }
    .searchInput:focus{
      background: rgba(255,255,255,.10);
      border-color: rgba(96,165,250,.45);
      box-shadow: var(--focus);
      width: min(280px, 60vw);
    }
    /* ‚úÖ Bouton clear recherche */
    .searchClear{
      position:absolute;
      right:10px;
      background:none;
      border:none;
      color: var(--muted2);
      cursor:pointer;
      font-size:14px;
      padding:0;
      line-height:1;
      display:none;
    }
    .searchClear.show{ display:block; }
    .searchClear:hover{ color: var(--text); }

    .filtersMeta{
      color: var(--muted2);
      font-size:12px;
      white-space:nowrap;
    }

    /* ‚îÄ‚îÄ CATEGORIES ‚îÄ‚îÄ */
    .cat{
      margin-top:14px;
      border:1px solid var(--line2);
      border-radius: 18px;
      overflow:hidden;
      background: rgba(0,0,0,.14);
      position:relative;
    }
    .cat:first-child{ margin-top:0; }

    .cat::before{
      content:"";
      position:absolute;
      left:0; top:0; bottom:0;
      width: 3px;
      background: linear-gradient(180deg, rgba(96,165,250,.55), rgba(167,139,250,.35), rgba(34,197,94,.35));
      opacity:.55;
    }
    .cat[data-cat="pokemon"]::before{
      background: linear-gradient(180deg, rgba(251,113,133,.65), rgba(251,113,133,.25), rgba(167,139,250,.25));
      opacity:.65;
    }
    .cat[data-cat="geo"]::before{
      background: linear-gradient(180deg, rgba(96,165,250,.65), rgba(96,165,250,.25), rgba(167,139,250,.25));
      opacity:.65;
    }
    .cat[data-cat="sport"]::before{
      background: linear-gradient(180deg, rgba(34,197,94,.65), rgba(34,197,94,.25), rgba(96,165,250,.22));
      opacity:.65;
    }
    .cat[data-cat="histoire"]::before{
      background: linear-gradient(180deg, rgba(245,158,11,.70), rgba(251,113,133,.22), rgba(96,165,250,.20));
      opacity:.70;
    }
    .cat[data-cat="cinema"]::before{
      background: linear-gradient(180deg, rgba(96,165,250,.70), rgba(251,113,133,.18), rgba(167,139,250,.18));
      opacity:.72;
    }
    .cat[data-cat="musique"]::before{
      background: linear-gradient(180deg, rgba(167,139,250,.75), rgba(96,165,250,.18), rgba(34,197,94,.18));
      opacity:.72;
    }
    .cat[data-cat="jeux-videos"]::before{
      background: linear-gradient(180deg, rgba(34,197,94,.70), rgba(96,165,250,.18), rgba(245,158,11,.16));
      opacity:.72;
    }
    .cat[data-cat="pop-culture"]::before{
      background: linear-gradient(180deg, rgba(251,113,133,.72), rgba(245,158,11,.18), rgba(96,165,250,.18));
      opacity:.74;
    }

    .catHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 14px;
      background: rgba(255,255,255,.035);
      border-bottom:1px solid rgba(255,255,255,.08);
      position:relative;
    }
    .catHead::after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:0;
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
      opacity:.6;
      pointer-events:none;
    }

    .catLeft{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }

    .catTitle{
      font-weight:900;
      letter-spacing:.2px;
      font-size:16px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .catCount{
      color: var(--muted2);
      font-size:12px;
      white-space:nowrap;
    }

    .subWrap{
      padding:12px;
      border-top:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.012);
    }
    .subWrap:first-of-type{ border-top:none; }

    .subHead{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
      padding:0 2px;
    }

    .subLeft{
      display:flex;
      align-items:center;
      gap:8px;
      min-width:0;
    }

    .subIco{
      font-size:16px;
      line-height:1;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.45));
      transform: translateY(-.5px);
      flex: 0 0 auto;
    }
    .subIco--rings{
      display:inline-flex;
      align-items:center;
      font-size:0;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,.45));
    }

    .subFlag{
      width:18px;
      height:12px;
      border-radius:3px;
      overflow:hidden;
      box-shadow: 0 10px 18px rgba(0,0,0,.45);
      border:1px solid rgba(255,255,255,.18);
      flex: 0 0 auto;
      transform: translateY(-.5px);
      background: rgba(0,0,0,.12);
    }
    .subFlag svg{ display:block; width:100%; height:100%; }

    .subTitle{
      font-weight:900;
      font-size:13px;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .subCount{
      color: var(--muted2);
      font-size:12px;
      white-space:nowrap;
    }

    .catIco{
      width:34px;
      height:34px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      display:grid;
      place-items:center;
      flex: 0 0 auto;
      position:relative;
      overflow:hidden;
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.04),
        0 10px 22px rgba(0,0,0,.30);
    }
    .catIco::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(circle at 25% 25%, rgba(255,255,255,.24), transparent 55%);
      opacity:.9;
      pointer-events:none;
    }

    /* Couleur currentColor par cat√©gorie */
    .catIco.poke       { border-color:rgba(251,113,133,.40); color:#fb7185; }
    .catIco.ico-geo    { border-color:rgba(96,165,250,.35);  color:#60a5fa; }
    .catIco.ico-sport  { border-color:rgba(34,197,94,.35);   color:#4ade80; }
    .catIco.ico-history{ border-color:rgba(245,158,11,.40);  color:#fbbf24; }
    .catIco.ico-cinema { border-color:rgba(96,165,250,.35);  color:#93c5fd; }
    .catIco.ico-music  { border-color:rgba(167,139,250,.40); color:#c4b5fd; }
    .catIco.ico-games  { border-color:rgba(34,197,94,.35);   color:#86efac; }
    .catIco.ico-pop    { border-color:rgba(251,113,133,.38); color:#fda4af; }

    /* SVG dans catIco */
    .catSvg{
      width:22px;
      height:22px;
      display:block;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,.45));
      position:relative;
      z-index:1;
    }

    /* SVG dans subIco */
    .subIco--svg{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      color: var(--muted);
      filter: drop-shadow(0 1px 4px rgba(0,0,0,.40));
    }
    .subIco--svg svg{ display:block; }

    .emoji{
      font-size:18px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.45));
      transform: translateY(-.5px);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap:12px;
      padding:0;
    }

    /* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
    .card{
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(0,0,0,.18));
      border-radius: 18px;
      padding:14px;
      cursor:pointer;
      transition: transform .16s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
      min-height:86px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:4px;
      align-items:center;
      text-align:center;
      position:relative;
      outline:none;
      will-change: transform;
    }

    .card::before{
      content:"";
      position:absolute;
      inset:-1px;
      border-radius: 18px;
      background: radial-gradient(420px 180px at 20% 10%, rgba(96,165,250,.18), transparent 60%);
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease;
    }

    .card:hover{
      transform: translateY(-4px);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(0,0,0,.20));
      border-color: rgba(255,255,255,.22);
      box-shadow: var(--shadow2);
    }
    .card:hover::before{ opacity:1; }

    .card:focus-visible{
      box-shadow: var(--focus), var(--shadow2);
      border-color: rgba(96,165,250,.45);
    }

    .card.selected{
      border-color: rgba(34,197,94,.60);
      background: linear-gradient(180deg, rgba(34,197,94,.16), rgba(0,0,0,.20));
      box-shadow: 0 0 0 3px rgba(34,197,94,.16), var(--shadow2);
    }
    .card.selected::before{
      background: radial-gradient(420px 180px at 20% 10%, rgba(34,197,94,.22), transparent 62%);
      opacity:1;
    }

    /* ‚îÄ‚îÄ ‚úÖ Badge "D√©j√† jou√©" ‚îÄ‚îÄ */
    .card.played{
      border-color: rgba(34,197,94,.30);
    }
    .playedBadge{
      display:none;
      position:absolute;
      top:8px;
      left:8px;
      background: rgba(34,197,94,.18);
      border:1px solid rgba(34,197,94,.40);
      border-radius:8px;
      font-size:11px;
      font-weight:900;
      color: #4ade80;
      padding:3px 7px;
      z-index:2;
      letter-spacing:.2px;
      line-height:1;
      backdrop-filter:blur(6px);
    }
    .card.played .playedBadge{ display:block; }

    .cTitle{
      font-weight:900;
      font-size:14px;
      line-height:1.25;
      letter-spacing:.15px;
      position:relative;
      z-index:1;
    }

    .cTitle .tYears{
      display:block;
      margin-top:4px;
      font-weight:800;
      opacity:.95;
    }

    .cDesc{
      font-size:12.5px;
      color:var(--muted2);
      line-height:1.35;
      position:relative;
      z-index:1;
    }

    .cardFlag{
      position:absolute;
      top:10px;
      right:10px;
      width:20px;
      height:13px;
      border-radius:4px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.14);
      box-shadow: 0 12px 22px rgba(0,0,0,.45);
      transform: translateY(-.5px);
      z-index:2;
    }
    .cardFlag svg{ display:block; width:100%; height:100%; }

    /* ‚îÄ‚îÄ BOUTONS ‚îÄ‚îÄ */
    .btn{
      padding:12px 16px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.07);
      color: var(--text);
      font-weight:900;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
      transition: transform .12s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
      outline:none;
      white-space:nowrap;
      font-family: inherit;
      font-size:14px;
    }
    .btn:hover{
      background: rgba(255,255,255,.11);
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.26);
    }
    .btn:active{ transform: translateY(0) scale(.985); }
    .btn:focus-visible{ box-shadow: var(--focus); border-color: rgba(96,165,250,.45); }

    .btn.primary{
      border-color: rgba(34,197,94,.45);
      background: linear-gradient(180deg, rgba(34,197,94,.22), rgba(34,197,94,.14));
      box-shadow: 0 10px 24px rgba(34,197,94,.10);
    }
    .btn.primary:hover{
      background: linear-gradient(180deg, rgba(34,197,94,.28), rgba(34,197,94,.16));
      border-color: rgba(34,197,94,.60);
      box-shadow: 0 14px 34px rgba(34,197,94,.14);
    }
    .btn:disabled{
      opacity:.45;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }

    .foot{
      margin-top:10px;
      text-align:center;
      color: var(--muted2);
      font-size:12px;
      position:relative;
      z-index:1;
    }

    code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      padding:2px 6px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      color: var(--text);
      white-space:nowrap;
    }

    ::-webkit-scrollbar{ width: 12px; height: 12px; }
    ::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.14);
      border: 3px solid rgba(0,0,0,.0);
      background-clip: padding-box;
      border-radius: 999px;
    }
    ::-webkit-scrollbar-thumb:hover{ background: rgba(255,255,255,.20); }
    ::-webkit-scrollbar-track{ background: rgba(0,0,0,.12); }

    /* ‚îÄ‚îÄ ‚úÖ DOCK ‚îÄ‚îÄ */
    .launchDockFixed{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: var(--dockGap);
      z-index: 999;
      width: min(1120px, calc(100% - 52px));
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 10px 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(10, 14, 34, .55);
      backdrop-filter: blur(12px);
      box-shadow: 0 18px 70px rgba(0,0,0,.45);
    }

    /* ‚úÖ Nom du quiz s√©lectionn√© dans le dock */
    .dockInfo{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
      flex:1;
    }
    .dockLabel{
      color: var(--muted2);
      font-size:12px;
      white-space:nowrap;
    }
    .dockTitle{
      font-weight:900;
      font-size:13px;
      color: var(--text);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      min-width:0;
      opacity:0;
      transform: translateY(4px);
      transition: opacity .18s ease, transform .18s ease;
    }
    .dockTitle.show{
      opacity:1;
      transform: translateY(0);
    }
    .dockHint{
      color: var(--muted2);
      font-size:11px;
      white-space:nowrap;
      opacity:0;
      transition: opacity .18s ease;
    }
    .dockHint.show{ opacity:1; }

    /* ‚úÖ Message "aucun r√©sultat" */
    .noResults{
      display:none;
      text-align:center;
      padding:32px 16px;
      color: var(--muted2);
      font-size:14px;
    }
    .noResults.show{ display:block; }

    @media (max-width: 520px){
      :root{ --dockGap: 12px; }
      .launchDockFixed{ width: calc(100% - 32px); }
      body{ padding:16px; padding-bottom: calc(16px + var(--dockH) + var(--dockGap)); }
      .dockInfo{ display:none; }
    }

    @media (prefers-reduced-motion: reduce){
      .card, .btn, .select{ transition: none !important; }
      .card:hover{ transform:none; }
      .btn:hover{ transform:none; }
      .btn:active{ transform:none; }
      .select:hover{ transform:none; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="hero">
      <h1>Mes Quiz</h1>
      <div class="sub">Choisis un quiz, puis lance-le üöÄ ‚Äî Double-clic ou Entr√©e pour lancer directement</div>
    </div>

    <div class="panel">

      <div class="filters" aria-label="Filtres">
        <div class="filtersLeft">
          <div class="filtersLabel">Cat√©gorie</div>
          <div class="selectWrap">
            <select id="catFilter" class="select" aria-label="Filtrer par cat√©gorie">
              <option value="all">Toutes</option>
            </select>
          </div>

          <!-- ‚úÖ Champ de recherche -->
          <div class="searchWrap">
            <input
              type="search"
              id="searchInput"
              class="searchInput"
              placeholder="Rechercher‚Ä¶"
              autocomplete="off"
              aria-label="Rechercher un quiz"
            />
            <button class="searchClear" id="searchClear" aria-label="Effacer la recherche">‚úï</button>
          </div>
        </div>
        <div class="filtersMeta" id="filtersMeta"></div>
      </div>

      <div id="sections"></div>
      <div class="noResults" id="noResults">üò∂ Aucun quiz ne correspond √† ta recherche.</div>

    </div>
  </div>

  <!-- ‚úÖ Dock am√©lior√© avec nom du quiz -->
  <div class="launchDockFixed">
    <div class="dockInfo">
      <span class="dockLabel">S√©lectionn√© :</span>
      <span class="dockTitle" id="dockTitle">‚Äî</span>
      <span class="dockHint" id="dockHint">¬∑ Double-clic pour lancer</span>
    </div>
    <button class="btn primary" id="btnGo" disabled>‚ñ∂ Lancer le quiz</button>
  </div>

<script>
  const QUIZZES = [
    { key:"pokemon-gen1", title:"Pok√©dex ‚Äî G√©n√©ration 1", desc:"151 Pok√©mon ‚Ä¢ Kanto", file:"pokemon-gen1.html", cat:"pokemon", sub:"pokedex" },
    { key:"pokemon-gen2", title:"Pok√©dex ‚Äî G√©n√©ration 2", desc:"100 Pok√©mon ‚Ä¢ Johto", file:"pokemon-gen2.html", cat:"pokemon", sub:"pokedex" },
    { key:"pokemon-gen3", title:"Pok√©dex ‚Äî G√©n√©ration 3", desc:"135 Pok√©mon ‚Ä¢ Hoenn", file:"pokemon-gen3.html", cat:"pokemon", sub:"pokedex" },

    { key:"tennis-grandslam-winners-f", title:"Tennis ‚Äî Vainqueures Grand Chelem (F)", desc:"Depuis 2000", file:"tennis-grandslam-winners-f.html", cat:"sport", sub:"tennis" },
    { key:"tennis-grandslam-winners-m", title:"Tennis ‚Äî Vainqueurs Grand Chelem (M)", desc:"Depuis 2000", file:"tennis-grandslam-winners-m.html", cat:"sport", sub:"tennis" },

    { key:"olympics-summer", title:"Jeux Olympiques d'√©t√© : villes & pays h√¥tes", desc:"Depuis 1896", file:"olympics-summer.html", cat:"sport", sub:"olympics" },
    { key:"olympics-winter", title:"Jeux Olympiques d'hiver : villes & pays h√¥tes", desc:"Depuis 1924", file:"olympics-winter.html", cat:"sport", sub:"olympics" },

    { key:"worldcup-winner", title:"Vainqueurs de la Coupe du monde de Football", desc:"Depuis 1930", file:"worldcup-winner.html", cat:"sport", sub:"football" },
    { key:"euro-winner", title:"Pays vainqueurs de l'Euro de football", desc:"Depuis 1960", file:"euro-winner.html", cat:"sport", sub:"football" },
    { key:"championsleague-winner", title:"Vainqueurs de la Ligue des Champions", desc:"Depuis 1956", file:"championsleague-winner.html", cat:"sport", sub:"football" },

    { key:"ligue1-winner", title:"Champions de France (Ligue 1 / D1)", desc:"Depuis 1932-1933", file:"ligue1-winner.html", cat:"sport", sub:"football", country:"FR" },
    { key:"lens-coach", title:"Entra√Æneurs du RC Lens", desc:"Depuis 1934", file:"lens-coach.html", cat:"sport", sub:"football", country:"FR" },
    { key:"premierleague-winner", title:"Champions d'Angleterre (D1 / Premier League)", desc:"Depuis 1888-89", file:"premierleague-winner.html", cat:"sport", sub:"football", country:"GB" },
    { key:"liga-winner", title:"Champions d'Espagne (La Liga)", desc:"Depuis 1929", file:"liga-winner.html", cat:"sport", sub:"football", country:"ES" },
    { key:"bundesliga-winner", title:"Champions d'Allemagne (Bundesliga)", desc:"Depuis 1963-64", file:"bundesliga-winner.html", cat:"sport", sub:"football", country:"DE" },
    { key:"seriea-winner", title:"Champions d'Italie (Serie A)", desc:"Depuis 1929-1930", file:"seriea-winner.html", cat:"sport", sub:"football", country:"IT" },

    { key:"national-teams-nicknames", title:"Surnoms des s√©lections", desc:"Trouve le pays √† partir du surnom de son √©quipe (football)", file:"surnoms-selections-50.html", cat:"sport", sub:"football" },

    { key:"rugby-worldcup-winner", title:"Vainqueurs de la Coupe du monde de Rugby", desc:"Depuis 1987", file:"rugby-worldcup-winner.html", cat:"sport", sub:"rugby" },
    { key:"top14-winner", title:"Vainqueurs du Top 14 / Championnat de France", desc:"Depuis 1892", file:"top14-winner.html", cat:"sport", sub:"rugby", country:"FR" },

    { key:"nba-winner", title:"Champions NBA", desc:"Depuis 1947", file:"nba-winner.html", cat:"sport", sub:"basket", country:"US" },

    { key:"formula-one-winner", title:"Champions F1", desc:"Depuis 1950", file:"formula-one-winner.html", cat:"sport", sub:"formula1" },

    { key:"capitales-europeennes", title:"Capitales europ√©ennes", desc:"Saisie libre ‚Ä¢ pays ‚Üí capitale", file:"capitales-europeennes.html", cat:"geo", sub:"europe" },
    { key:"departements-fran√ßais", title:"D√©partements fran√ßais", desc:"Trouver les d√©partements par num√©ro", file:"departements-fran√ßais.html", cat:"geo", sub:"france" },

    { key:"presidents-ve-republique", title:"Pr√©sidents ‚Äî Ve R√©publique", desc:"Depuis 1959", file:"presidents-ve-republique.html", cat:"histoire", sub:"france", country:"FR" },
    { key:"rois-france", title:"üëë Rois de France", desc:"Par dynastie", file:"rois-france.html", cat:"histoire", sub:"france", country:"FR" },
	{ key:"rois-anglais", title:"Rois & Reines (Angleterre & Royaume-Uni)", desc:"Par dynastie", file:"rois-anglais.html", cat:"histoire", sub:"angleterre", country:"UK" },
	{ key:"presidents-russes", title:"Dirigeants Russie & URSS", desc:"Depuis 1917", file:"presidents-russes.html", cat:"histoire", sub:"russie", country:"RU" },

    { key:"box-office-monde", title:"Top 50 box-office mondial", desc:"(Box Office Mojo)", file:"box-office-monde.html", cat:"cinema", sub:"films" },
    { key:"disney-pixar", title:"Disney + Pixar", desc:"Films √† trouver", file:"disney-pixar.html", cat:"cinema", sub:"films" },

    { key:"bilboard-world", title:"Top 20 artistes", desc:"(ventes mondiales)", file:"bilboard-world.html", cat:"musique", sub:"artistes" },
    { key:"bilboard-france", title:"Top 20 artistes francophones", desc:"(ventes)", file:"bilboard-france.html", cat:"musique", sub:"artistes", country:"FR" },
  ];

  const CATS = [
    { id:"pokemon",      title:"Pok√©mon",     icon:"poke" },
    { id:"geo",          title:"G√©ographie",  icon:"earth" },
    { id:"sport",        title:"Sport",       icon:"ball" },
    { id:"histoire",     title:"Histoire",    icon:"history" },
    { id:"cinema",       title:"Cin√©ma",      icon:"films" },
    { id:"musique",      title:"Musique",     icon:"music" },
    { id:"jeux-videos",  title:"Jeux vid√©os", icon:"games" },
    { id:"pop-culture",  title:"Pop culture", icon:"pop" }
  ];

  const SUBCATS = {
    sport: [
      { id:"olympics",   title:"Jeux Olympiques", icon:"olympics" },
      { id:"football",   title:"Football",        icon:"football" },
      { id:"tennis",     title:"Tennis",          icon:"tennis" },
      { id:"rugby",      title:"Rugby",           icon:"rugby" },
      { id:"basket",     title:"Basket",          icon:"basket" },
      { id:"formula1",  title:"Formule 1",       icon:"formula1" }
    ],
    geo: [
      { id:"monde",  title:"Monde",  icon:"earth" },
      { id:"europe", title:"Europe", icon:"europe" },
      { id:"france", title:"France", icon:"france" }
    ],
    pokemon: [
      { id:"pokedex", title:"Pok√©dex", icon:"poke" }
    ],
    histoire: [
      { id:"france",      title:"France",      icon:"france" },
      { id:"angleterre",  title:"Angleterre",  icon:"uk" },
      { id:"etats-unis",  title:"Etats-Unis",  icon:"us" },
      { id:"russie",      title:"Russie",       icon:"ru" }
    ],
    cinema: [
      { id:"films",   title:"Films",   icon:"üé¨" },
      { id:"series",  title:"S√©ries",  icon:"üì∫" },
      { id:"acteurs", title:"Acteurs", icon:"‚≠ê" }
    ],
    musique: [
      { id:"artistes", title:"Artistes", icon:"üé§" },
      { id:"albums",   title:"Albums",   icon:"üíø" },
      { id:"titres",   title:"Titres",   icon:"üéµ" }
    ],
    "jeux-videos": [
      { id:"nintendo",    title:"Nintendo",    icon:"üéÆ" },
      { id:"playstation", title:"PlayStation", icon:"üïπÔ∏è" },
      { id:"pc",          title:"PC",          icon:"üíª" }
    ],
    "pop-culture": [
      { id:"marvel",   title:"Marvel",    icon:"ü¶∏" },
      { id:"starwars", title:"Star Wars", icon:"‚ú®" },
      { id:"anime",    title:"Anime",     icon:"üå∏" }
    ]
  };

  const SUBICON = {
    olympics:"üèÖ", football:"‚öΩ", tennis:"üéæ", rugby:"üèâ",
    basket:"üèÄ", formula1:"üèéÔ∏è", monde:"üåç", earth:"üåç", poke:"üî¥",
    history:"üìú", films:"üé¨", music:"üéµ", games:"üéÆ", pop:"‚ú®"
  };

  // ‚îÄ‚îÄ ‚úÖ localStorage : quiz d√©j√† jou√©s ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function getPlayedSet(){
    try { return new Set(JSON.parse(localStorage.getItem("quizPlayed") || "[]")); }
    catch { return new Set(); }
  }
  const playedSet = getPlayedSet();

  // ‚îÄ‚îÄ DOM refs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const sections    = document.getElementById("sections");
  const btnGo       = document.getElementById("btnGo");
  const catFilter   = document.getElementById("catFilter");
  const filtersMeta = document.getElementById("filtersMeta");
  const searchInput = document.getElementById("searchInput");
  const searchClear = document.getElementById("searchClear");
  const dockTitle   = document.getElementById("dockTitle");
  const dockHint    = document.getElementById("dockHint");
  const noResults   = document.getElementById("noResults");

  let selectedFile  = null;
  let selectedKey   = null;

  // ‚îÄ‚îÄ Utilitaires ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function formatTitleHTML(title){
    const m = title.match(/^(.*?)(\s*\((?:\d{3,4})(?:[^)]*)\))\s*$/);
    if (!m) return title;
    return `${m[1]}<span class="tYears">${m[2].trim()}</span>`;
  }

  function normalizeSearch(str){
    return (str || "").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();
  }

  function catIconHTML(icon){
    if (icon === "poke") return `<div class="catIco poke" aria-hidden="true">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="catSvg" style="overflow:visible">
        <!-- Oreille gauche -->
        <path d="M7 15 L5 3 L12 11 Z" fill="#f5c518" stroke="#1a1200" stroke-width="1.1" stroke-linejoin="round"/>
        <path d="M7.5 14 L6.5 6 L11 11 Z" fill="#1a1200" opacity="0.75"/>
        <!-- Oreille droite -->
        <path d="M25 15 L27 3 L20 11 Z" fill="#f5c518" stroke="#1a1200" stroke-width="1.1" stroke-linejoin="round"/>
        <path d="M24.5 14 L25.5 6 L21 11 Z" fill="#1a1200" opacity="0.75"/>
        <!-- T√™te ronde jaune -->
        <ellipse cx="16" cy="19" rx="12" ry="11" fill="#f5c518" stroke="#1a1200" stroke-width="1.3"/>
        <!-- Joue gauche rose -->
        <ellipse cx="8" cy="22" rx="3.5" ry="2.5" fill="#f07070" opacity="0.88"/>
        <!-- Joue droite rose -->
        <ellipse cx="24" cy="22" rx="3.5" ry="2.5" fill="#f07070" opacity="0.88"/>
        <!-- Yeux noirs -->
        <ellipse cx="12.5" cy="17" rx="2.2" ry="2.4" fill="#1a1200"/>
        <ellipse cx="19.5" cy="17" rx="2.2" ry="2.4" fill="#1a1200"/>
        <!-- Reflets blancs dans les yeux -->
        <circle cx="13.3" cy="15.8" r="0.8" fill="white"/>
        <circle cx="20.3" cy="15.8" r="0.8" fill="white"/>
        <!-- Nez -->
        <ellipse cx="16" cy="20.5" rx="1.2" ry="0.7" fill="#1a1200" opacity="0.75"/>
        <!-- Bouche sourire -->
        <path d="M13 22.5 Q16 25.5 19 22.5" stroke="#1a1200" stroke-width="1.2" fill="none" stroke-linecap="round"/>
        <!-- Reflet lumineux sur le front -->
        <ellipse cx="12" cy="14" rx="2.5" ry="1.4" fill="white" opacity="0.22" transform="rotate(-20,12,14)"/>
      </svg>
    </div>`;
    if (icon === "ball") return `<div class="catIco ico-sport" aria-hidden="true">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="catSvg">
        <circle cx="16" cy="16" r="12.5" fill="none" stroke="currentColor" stroke-width="2"/>
        <!-- Pentagone central -->
        <polygon points="16,9 20.8,12.6 19,18 13,18 11.2,12.6" fill="currentColor" opacity="0.85"/>
        <!-- Pentagones p√©riph√©riques (5 hexagones simplifi√©s) -->
        <polygon points="16,3 18.4,5.8 16,8.2 13.6,5.8" fill="currentColor" opacity="0.55"/>
        <polygon points="27.5,12 27,15.5 24,14.5 24.2,11.2" fill="currentColor" opacity="0.55"/>
        <polygon points="23,26.5 20,25.5 21,22.5 24.2,22.8" fill="currentColor" opacity="0.55"/>
        <polygon points="9,26.5 7.8,22.8 11,22.5 12,25.5" fill="currentColor" opacity="0.55"/>
        <polygon points="4.5,12 7.8,11.2 8,14.5 5,15.5" fill="currentColor" opacity="0.55"/>
        <ellipse cx="12" cy="9" rx="2.5" ry="1.4" fill="white" opacity="0.18" transform="rotate(-25,12,9)"/>
      </svg>
    </div>`;
    if (icon === "history") return `<div class="catIco ico-history" aria-hidden="true">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="catSvg">
        <!-- Colonne antique -->
        <!-- Chapiteau -->
        <rect x="7" y="6" width="18" height="3" rx="1.5" fill="currentColor" opacity="0.9"/>
        <!-- F√ªt de la colonne avec cannelures -->
        <rect x="10" y="9" width="12" height="16" rx="1" fill="currentColor" opacity="0.30"/>
        <line x1="13" y1="9" x2="13" y2="25" stroke="currentColor" stroke-width="1.2" opacity="0.65"/>
        <line x1="16" y1="9" x2="16" y2="25" stroke="currentColor" stroke-width="1.2" opacity="0.65"/>
        <line x1="19" y1="9" x2="19" y2="25" stroke="currentColor" stroke-width="1.2" opacity="0.65"/>
        <!-- Stylobate -->
        <rect x="6" y="25" width="20" height="3" rx="1.5" fill="currentColor" opacity="0.9"/>
        <ellipse cx="12" cy="9" rx="2.5" ry="1.4" fill="white" opacity="0.18" transform="rotate(-25,12,9)"/>
      </svg>
    </div>`;
    if (icon === "films") return `<div class="catIco ico-cinema" aria-hidden="true">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="catSvg">
        <!-- Corps du clap -->
        <rect x="5" y="14" width="22" height="14" rx="2.5" fill="currentColor" opacity="0.85"/>
        <!-- Bande clap sup√©rieure (noire) -->
        <rect x="5" y="10.5" width="22" height="4.5" rx="1.5" fill="currentColor"/>
        <!-- Rayures diagonales blanches du clap -->
        <clipPath id="clipClap"><rect x="5" y="10.5" width="22" height="4.5" rx="1.5"/></clipPath>
        <g clip-path="url(#clipClap)" opacity="0.90">
          <line x1="8"  y1="8"  x2="4"  y2="17" stroke="white" stroke-width="2.8"/>
          <line x1="13" y1="8"  x2="9"  y2="17" stroke="white" stroke-width="2.8"/>
          <line x1="18" y1="8"  x2="14" y2="17" stroke="white" stroke-width="2.8"/>
          <line x1="23" y1="8"  x2="19" y2="17" stroke="white" stroke-width="2.8"/>
          <line x1="28" y1="8"  x2="24" y2="17" stroke="white" stroke-width="2.8"/>
        </g>
        <!-- Trous de pellicule sur les c√¥t√©s -->
        <rect x="6.5" y="16.5" width="3" height="3" rx="0.8" fill="white" opacity="0.35"/>
        <rect x="6.5" y="21.5" width="3" height="3" rx="0.8" fill="white" opacity="0.35"/>
        <rect x="22.5" y="16.5" width="3" height="3" rx="0.8" fill="white" opacity="0.35"/>
        <rect x="22.5" y="21.5" width="3" height="3" rx="0.8" fill="white" opacity="0.35"/>
        <!-- Triangle play -->
        <polygon points="13.5,18 13.5,25 21,21.5" fill="white" opacity="0.70"/>
        <ellipse cx="12" cy="12" rx="2" ry="1.2" fill="white" opacity="0.18" transform="rotate(-20,12,12)"/>
      </svg>
    </div>`;
    if (icon === "music") return `<div class="catIco ico-music" aria-hidden="true">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="catSvg">
        <!-- Double croche : deux t√™tes de notes li√©es -->
        <!-- Hampe droite -->
        <line x1="22" y1="7" x2="22" y2="22" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
        <!-- Hampe gauche -->
        <line x1="14" y1="10" x2="14" y2="24" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
        <!-- Liaison haute -->
        <path d="M14 10 Q18 7.5 22 7" stroke="currentColor" stroke-width="2.2" fill="none" stroke-linecap="round"/>
        <!-- Liaison basse (double croche) -->
        <path d="M14 14 Q18 11.5 22 11" stroke="currentColor" stroke-width="2.2" fill="none" stroke-linecap="round"/>
        <!-- T√™te note gauche -->
        <ellipse cx="13" cy="24.5" rx="3.2" ry="2.2" fill="currentColor" transform="rotate(-15,13,24.5)"/>
        <!-- T√™te note droite -->
        <ellipse cx="21" cy="22.5" rx="3.2" ry="2.2" fill="currentColor" transform="rotate(-15,21,22.5)"/>
        <ellipse cx="12" cy="9" rx="2.5" ry="1.4" fill="white" opacity="0.18" transform="rotate(-25,12,9)"/>
      </svg>
    </div>`;
    if (icon === "games") return `<div class="catIco ico-games" aria-hidden="true">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="catSvg">
        <!-- Corps manette -->
        <path d="M6 13 Q6 9 10 9 L22 9 Q26 9 26 13 L27 20 Q28 25 24 25 Q21 25 19.5 22 L12.5 22 Q11 25 8 25 Q4 25 5 20 Z" fill="currentColor" opacity="0.85"/>
        <!-- Croix directionnelle gauche -->
        <rect x="9" y="14.5" width="5" height="2" rx="0.8" fill="white" opacity="0.70"/>
        <rect x="10.5" y="13" width="2" height="5" rx="0.8" fill="white" opacity="0.70"/>
        <!-- Boutons droite -->
        <circle cx="20.5" cy="14" r="1.4" fill="white" opacity="0.65"/>
        <circle cx="23"   cy="15.8" r="1.4" fill="white" opacity="0.65"/>
        <circle cx="20.5" cy="17.5" r="1.4" fill="white" opacity="0.65"/>
        <circle cx="18"   cy="15.8" r="1.4" fill="white" opacity="0.65"/>
        <!-- Reflet -->
        <ellipse cx="12" cy="10.5" rx="3" ry="1.4" fill="white" opacity="0.18" transform="rotate(-15,12,10.5)"/>
      </svg>
    </div>`;
    if (icon === "pop") return `<div class="catIco ico-pop" aria-hidden="true">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="catSvg">
        <!-- √âtoile √† 5 branches principale -->
        <polygon points="16,4 18.9,12.2 27.7,12.2 20.9,17.4 23.5,25.8 16,20.8 8.5,25.8 11.1,17.4 4.3,12.2 13.1,12.2" fill="currentColor" opacity="0.90"/>
        <!-- Petites √©toiles satellites -->
        <polygon points="27,5 27.8,7.4 30.3,7.4 28.3,8.9 29,11.2 27,9.7 25,11.2 25.7,8.9 23.7,7.4 26.2,7.4" fill="currentColor" opacity="0.50" transform="scale(0.72) translate(10,-1)"/>
        <ellipse cx="12" cy="8" rx="2.5" ry="1.4" fill="white" opacity="0.22" transform="rotate(-25,12,8)"/>
      </svg>
    </div>`;
    // Globe terrestre avec oc√©ans et continents simplifi√©s
    return `<div class="catIco ico-geo" aria-hidden="true">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="catSvg">
        <defs>
          <clipPath id="globeClip"><circle cx="16" cy="16" r="12.5"/></clipPath>
        </defs>
        <!-- Oc√©an (fond bleu) -->
        <circle cx="16" cy="16" r="12.5" fill="#3b7dd8" opacity="0.85"/>
        <!-- Continents verts/jaunes simplifi√©s, style g√©o r√©tro -->
        <!-- Am√©rique du Nord -->
        <path d="M6 7 L9 6 L12 8 L13 12 L11 15 L8 14 L5 11 Z" fill="#4caf70" opacity="0.90" clip-path="url(#globeClip)"/>
        <!-- Am√©rique du Sud -->
        <path d="M10 17 L13 16 L14 19 L13 24 L10 25 L8 22 L9 19 Z" fill="#4caf70" opacity="0.90" clip-path="url(#globeClip)"/>
        <!-- Europe -->
        <path d="M15 7 L18 6 L20 8 L19 11 L17 12 L15 10 Z" fill="#4caf70" opacity="0.90" clip-path="url(#globeClip)"/>
        <!-- Afrique -->
        <path d="M16 13 L20 12 L22 15 L22 21 L19 24 L16 23 L15 19 L15 14 Z" fill="#4caf70" opacity="0.90" clip-path="url(#globeClip)"/>
        <!-- Asie + partie Russie -->
        <path d="M19 6 L28 7 L29 11 L27 14 L24 15 L21 13 L20 10 Z" fill="#4caf70" opacity="0.90" clip-path="url(#globeClip)"/>
        <!-- Asie du Sud-Est / Inde -->
        <path d="M22 15 L26 14 L27 18 L25 20 L22 19 Z" fill="#4caf70" opacity="0.85" clip-path="url(#globeClip)"/>
        <!-- Australie -->
        <path d="M23 21 L27 20 L28 24 L25 26 L22 25 Z" fill="#c8a44a" opacity="0.85" clip-path="url(#globeClip)"/>
        <!-- Groenland -->
        <path d="M13 5 L16 5 L16 8 L14 8 Z" fill="#e8f4f8" opacity="0.75" clip-path="url(#globeClip)"/>
        <!-- Contour du globe -->
        <circle cx="16" cy="16" r="12.5" fill="none" stroke="#1a3a6e" stroke-width="1.6" opacity="0.70"/>
        <!-- M√©ridien central discret -->
        <ellipse cx="16" cy="16" rx="5.5" ry="12.5" fill="none" stroke="white" stroke-width="0.7" opacity="0.20" clip-path="url(#globeClip)"/>
        <!-- √âquateur discret -->
        <line x1="3.5" y1="16" x2="28.5" y2="16" stroke="white" stroke-width="0.7" opacity="0.20" clip-path="url(#globeClip)"/>
        <!-- Reflet lumineux -->
        <ellipse cx="11" cy="10" rx="3.5" ry="2" fill="white" opacity="0.22" transform="rotate(-30,11,10)" clip-path="url(#globeClip)"/>
      </svg>
    </div>`;
  }

  // ‚îÄ‚îÄ Drapeaux ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function euFlagSVG(cls="subFlag"){
    return `<span class="${cls}" aria-hidden="true"><svg viewBox="0 0 18 12" xmlns="http://www.w3.org/2000/svg"><rect width="18" height="12" fill="#003399"/><g fill="#FFCC00" transform="translate(9 6)">${Array.from({length:12}).map((_,i)=>{const a=(i*30)*Math.PI/180;return `<circle cx="${(Math.cos(a)*3.2).toFixed(2)}" cy="${(Math.sin(a)*3.2).toFixed(2)}" r="0.55"/>`;}).join("")}</g></svg></span>`;
  }
  function frFlagSVG(cls="subFlag"){
    return `<span class="${cls}" aria-hidden="true"><svg viewBox="0 0 18 12" xmlns="http://www.w3.org/2000/svg"><rect width="6" height="12" x="0" fill="#0055A4"/><rect width="6" height="12" x="6" fill="#FFFFFF"/><rect width="6" height="12" x="12" fill="#EF4135"/></svg></span>`;
  }
  function ukFlagSVG(cls="subFlag"){
    return `<span class="${cls}" aria-hidden="true"><svg viewBox="0 0 18 12" xmlns="http://www.w3.org/2000/svg"><rect width="18" height="12" fill="#012169"/><path d="M0,0 L2,0 L18,10 L18,12 L16,12 L0,2 Z" fill="#FFFFFF" opacity=".92"/><path d="M18,0 L16,0 L0,10 L0,12 L2,12 L18,2 Z" fill="#FFFFFF" opacity=".92"/><path d="M0,0 L1.3,0 L18,9.3 L18,10.6 L16.7,10.6 L0,1.3 Z" fill="#C8102E" opacity=".95"/><path d="M18,0 L16.7,0 L0,9.3 L0,10.6 L1.3,10.6 L18,1.3 Z" fill="#C8102E" opacity=".95"/><rect x="7" y="0" width="4" height="12" fill="#FFFFFF"/><rect x="0" y="4" width="18" height="4" fill="#FFFFFF"/><rect x="7.7" y="0" width="2.6" height="12" fill="#C8102E"/><rect x="0" y="4.7" width="18" height="2.6" fill="#C8102E"/></svg></span>`;
  }
  function usFlagSVG(cls="subFlag"){
    const stripes=Array.from({length:7}).map((_,i)=>`<rect x="0" y="${(i*12/7).toFixed(3)}" width="18" height="${(12/7/2).toFixed(3)}" fill="#B22234"/>`).join("");
    return `<span class="${cls}" aria-hidden="true"><svg viewBox="0 0 18 12" xmlns="http://www.w3.org/2000/svg"><rect width="18" height="12" fill="#FFFFFF"/>${stripes}<rect x="0" y="0" width="8" height="6.5" fill="#3C3B6E"/><g fill="#FFFFFF" opacity=".95">${Array.from({length:12}).map((_,i)=>`<circle cx="${(1.1+(i%4)*1.8).toFixed(2)}" cy="${(1.0+Math.floor(i/4)*1.6).toFixed(2)}" r="0.28"/>`).join("")}</g></svg></span>`;
  }
  function ruFlagSVG(cls="subFlag"){
    return `<span class="${cls}" aria-hidden="true"><svg viewBox="0 0 18 12" xmlns="http://www.w3.org/2000/svg"><rect width="18" height="4" y="0" fill="#FFFFFF"/><rect width="18" height="4" y="4" fill="#0039A6"/><rect width="18" height="4" y="8" fill="#D52B1E"/></svg></span>`;
  }
  function deFlagSVG(){
    return `<span class="cardFlag" aria-hidden="true"><svg viewBox="0 0 18 12" xmlns="http://www.w3.org/2000/svg"><rect width="18" height="4" y="0" fill="#000000"/><rect width="18" height="4" y="4" fill="#DD0000"/><rect width="18" height="4" y="8" fill="#FFCE00"/></svg></span>`;
  }
  function itFlagSVG(){
    return `<span class="cardFlag" aria-hidden="true"><svg viewBox="0 0 18 12" xmlns="http://www.w3.org/2000/svg"><rect width="6" height="12" x="0" fill="#009246"/><rect width="6" height="12" x="6" fill="#FFFFFF"/><rect width="6" height="12" x="12" fill="#CE2B37"/></svg></span>`;
  }
  function esFlagSVG(){
    return `<span class="cardFlag" aria-hidden="true"><svg viewBox="0 0 18 12" xmlns="http://www.w3.org/2000/svg"><rect width="18" height="12" fill="#AA151B"/><rect width="18" height="6" y="3" fill="#F1BF00"/></svg></span>`;
  }

  function cardFlagHTML(code){
    if (!code) return "";
    const c = String(code).toUpperCase();
    if (c==="FR") return frFlagSVG("cardFlag");
    if (c==="GB"||c==="UK") return ukFlagSVG("cardFlag");
    if (c==="US") return usFlagSVG("cardFlag");
    if (c==="RU") return ruFlagSVG("cardFlag");
    if (c==="DE") return deFlagSVG();
    if (c==="IT") return itFlagSVG();
    if (c==="ES") return esFlagSVG();
    return "";
  }

  function subIconHTML(iconKey){
    if (iconKey==="europe") return euFlagSVG();
    if (iconKey==="france") return frFlagSVG();
    if (iconKey==="uk"||iconKey==="angleterre") return ukFlagSVG();
    if (iconKey==="us"||iconKey==="etats-unis") return usFlagSVG();
    if (iconKey==="ru"||iconKey==="russie") return ruFlagSVG();

    // Anneaux olympiques
    if (iconKey==="olympics") return `<span class="subIco subIco--rings" aria-hidden="true"><svg viewBox="0 0 44 28" xmlns="http://www.w3.org/2000/svg" width="36" height="23">
      <circle cx="9"   cy="10" r="7.5" fill="none" stroke="#0085C7" stroke-width="2.6"/>
      <circle cx="22"  cy="10" r="7.5" fill="none" stroke="#F4C300" stroke-width="2.6"/>
      <circle cx="35"  cy="10" r="7.5" fill="none" stroke="#009F3D" stroke-width="2.6"/>
      <circle cx="15.5" cy="19" r="7.5" fill="none" stroke="#DF0024" stroke-width="2.6"/>
      <circle cx="28.5" cy="19" r="7.5" fill="none" stroke="#1a1a1a"  stroke-width="2.6"/>
    </svg></span>`;

    // Football
    // Football ‚Äî ballon classique noir & blanc
    if (iconKey==="football") return `<span class="subIco subIco--svg" aria-hidden="true"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="18" height="18">
      <defs><clipPath id="fbClip"><circle cx="12" cy="12" r="10"/></clipPath></defs>
      <!-- Fond blanc -->
      <circle cx="12" cy="12" r="10" fill="#f0f0f0"/>
      <!-- Pentagone central noir -->
      <polygon points="12,6.5 14.9,8.7 13.8,12 10.2,12 9.1,8.7" fill="#1a1a1a" clip-path="url(#fbClip)"/>
      <!-- Pentagones p√©riph√©riques noirs (5) -->
      <polygon points="12,2.2 14.2,3.8 13.4,6.5 10.6,6.5 9.8,3.8" fill="#1a1a1a" clip-path="url(#fbClip)"/>
      <polygon points="20.8,8 21.6,10.8 19.2,12.3 17.2,10.8 17.8,8" fill="#1a1a1a" clip-path="url(#fbClip)"/>
      <polygon points="18.4,19.8 16,20.8 14.4,18.8 15.6,16.5 18.2,16.8" fill="#1a1a1a" clip-path="url(#fbClip)"/>
      <polygon points="5.6,19.8 5.8,16.8 8.4,16.5 9.6,18.8 8,20.8" fill="#1a1a1a" clip-path="url(#fbClip)"/>
      <polygon points="3.2,8 6.2,8 6.8,10.8 4.8,12.3 2.4,10.8" fill="#1a1a1a" clip-path="url(#fbClip)"/>
      <!-- Contour du ballon -->
      <circle cx="12" cy="12" r="10" fill="none" stroke="#555" stroke-width="1.3"/>
      <!-- Reflet -->
      <ellipse cx="8.5" cy="7" rx="2.8" ry="1.5" fill="white" opacity="0.50" transform="rotate(-25,8.5,7)" clip-path="url(#fbClip)"/>
    </svg></span>`;

    // Tennis ‚Äî raquette inclin√©e + balle
    if (iconKey==="tennis") return `<span class="subIco subIco--svg" aria-hidden="true"><svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg" width="22" height="22">
      <defs>
        <clipPath id="rqClip"><ellipse cx="10" cy="10" rx="7.5" ry="8.5" transform="rotate(-35,10,10)"/></clipPath>
      </defs>
      <!-- Cadre de la raquette (ellipse inclin√©e) -->
      <ellipse cx="10" cy="10" rx="7.5" ry="8.5" fill="none" stroke="currentColor" stroke-width="1.8" transform="rotate(-35,10,10)" opacity="0.90"/>
      <!-- Cordage horizontal (3 cordes) -->
      <line x1="4.5" y1="6.8"  x2="15" y2="3.5"  stroke="currentColor" stroke-width="0.9" opacity="0.55" clip-path="url(#rqClip)"/>
      <line x1="3.5" y1="10.2" x2="16" y2="6.8"  stroke="currentColor" stroke-width="0.9" opacity="0.55" clip-path="url(#rqClip)"/>
      <line x1="4"   y1="13.5" x2="15" y2="10.2" stroke="currentColor" stroke-width="0.9" opacity="0.55" clip-path="url(#rqClip)"/>
      <!-- Cordage vertical (3 cordes) -->
      <line x1="6.5"  y1="3"   x2="3.2"  y2="16"  stroke="currentColor" stroke-width="0.9" opacity="0.55" clip-path="url(#rqClip)"/>
      <line x1="10"   y1="2.2" x2="6.8"  y2="16.5" stroke="currentColor" stroke-width="0.9" opacity="0.55" clip-path="url(#rqClip)"/>
      <line x1="13.5" y1="2.8" x2="10.2" y2="16.5" stroke="currentColor" stroke-width="0.9" opacity="0.55" clip-path="url(#rqClip)"/>
      <!-- Gorge (triangle entre cadre et manche) -->
      <path d="M15.5 14.5 L17 16.5 L13 18 Z" fill="currentColor" opacity="0.65"/>
      <!-- Manche -->
      <line x1="15.8" y1="15.8" x2="22" y2="22" stroke="currentColor" stroke-width="2.8" stroke-linecap="round" opacity="0.88"/>
      <!-- Bout du manche arrondi -->
      <circle cx="22.2" cy="22.2" r="1.5" fill="currentColor" opacity="0.75"/>
      <!-- Balle de tennis jaune-vert -->
      <circle cx="20" cy="7" r="4" fill="#c8e020" stroke="#8aaa00" stroke-width="1.2" opacity="0.95"/>
      <!-- Courbes blanches caract√©ristiques de la balle -->
      <path d="M16.5 5.5 Q18 7 16.5 8.5" stroke="white" stroke-width="1" fill="none" stroke-linecap="round" opacity="0.80"/>
      <path d="M23.5 5.5 Q22 7 23.5 8.5" stroke="white" stroke-width="1" fill="none" stroke-linecap="round" opacity="0.80"/>
      <!-- Reflet balle -->
      <ellipse cx="18.5" cy="5.5" rx="1.3" ry="0.8" fill="white" opacity="0.45" transform="rotate(-20,18.5,5.5)"/>
    </svg></span>`;

    // Rugby ‚Äî ballon blanc avec coutures
    if (iconKey==="rugby") return `<span class="subIco subIco--svg" aria-hidden="true"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="18" height="18">
      <defs><clipPath id="rgClip"><ellipse cx="12" cy="12" rx="9" ry="6.5" transform="rotate(-35,12,12)"/></clipPath></defs>
      <!-- Corps blanc du ballon ovale -->
      <ellipse cx="12" cy="12" rx="9" ry="6.5" fill="#f4f4f2" transform="rotate(-35,12,12)"/>
      <!-- Contour brun clair -->
      <ellipse cx="12" cy="12" rx="9" ry="6.5" fill="none" stroke="#8a7060" stroke-width="1.5" transform="rotate(-35,12,12)"/>
      <!-- Couture centrale (ligne de l'axe long) -->
      <line x1="4.5" y1="17.5" x2="19.5" y2="6.5" stroke="#8a7060" stroke-width="1.3" clip-path="url(#rgClip)"/>
      <!-- Coutures transversales (tirets) -->
      <line x1="9"  y1="11.5" x2="11"  y2="9.5"  stroke="#8a7060" stroke-width="1.0" clip-path="url(#rgClip)"/>
      <line x1="11.5" y1="13" x2="13.5" y2="11"  stroke="#8a7060" stroke-width="1.0" clip-path="url(#rgClip)"/>
      <line x1="14"  y1="14.5" x2="16" y2="12.5" stroke="#8a7060" stroke-width="1.0" clip-path="url(#rgClip)"/>
      <!-- Reflet -->
      <ellipse cx="9.5" cy="9" rx="2.5" ry="1.3" fill="white" opacity="0.55" transform="rotate(-35,9.5,9)" clip-path="url(#rgClip)"/>
    </svg></span>`;

    // Basket ‚Äî orange avec lignes noires
    if (iconKey==="basket") return `<span class="subIco subIco--svg" aria-hidden="true"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="18" height="18">
      <defs><clipPath id="bkClip"><circle cx="12" cy="12" r="10"/></clipPath></defs>
      <!-- Corps orange -->
      <circle cx="12" cy="12" r="10" fill="#e8621a"/>
      <!-- Liser√© plus sombre sur les bords -->
      <circle cx="12" cy="12" r="10" fill="none" stroke="#b84a0a" stroke-width="1.4"/>
      <!-- Ligne verticale centrale -->
      <line x1="12" y1="2" x2="12" y2="22" stroke="#1a0a00" stroke-width="1.3" clip-path="url(#bkClip)"/>
      <!-- Courbe horizontale haute -->
      <path d="M2 12 Q7 6 12 12" stroke="#1a0a00" stroke-width="1.3" fill="none" clip-path="url(#bkClip)"/>
      <!-- Courbe horizontale basse -->
      <path d="M12 12 Q17 18 22 12" stroke="#1a0a00" stroke-width="1.3" fill="none" clip-path="url(#bkClip)"/>
      <!-- Reflet lumineux -->
      <ellipse cx="8.5" cy="7" rx="3" ry="1.6" fill="white" opacity="0.22" transform="rotate(-25,8.5,7)" clip-path="url(#bkClip)"/>
    </svg></span>`;

    // Formule 1
    if (iconKey==="formula1") return `<span class="subIco subIco--svg" aria-hidden="true"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="18" height="18">
      <!-- Carrosserie -->
      <path d="M2 14 L5 10 L10 9.5 L14 8.5 L19 9 L22 11 L22 14 L18 14 L18 13 L15 12 L9 12 L6 13 L6 14 Z" fill="currentColor" opacity="0.85"/>
      <!-- Aileron avant -->
      <rect x="18.5" y="13" width="3" height="1.5" rx="0.5" fill="currentColor" opacity="0.70"/>
      <!-- Aileron arri√®re (haut) -->
      <rect x="3" y="9" width="4" height="1" rx="0.5" fill="currentColor" opacity="0.70"/>
      <!-- Roues -->
      <circle cx="7.5"  cy="14.8" r="2.2" fill="currentColor"/>
      <circle cx="17.5" cy="14.8" r="2.2" fill="currentColor"/>
      <circle cx="7.5"  cy="14.8" r="1"   fill="rgba(255,255,255,0.25)"/>
      <circle cx="17.5" cy="14.8" r="1"   fill="rgba(255,255,255,0.25)"/>
      <!-- Cockpit -->
      <ellipse cx="12" cy="11" rx="2.5" ry="1.5" fill="rgba(255,255,255,0.22)"/>
    </svg></span>`;

    // Pok√©ball am√©lior√©e pour sous-cat√©gorie Pok√©dex
    if (iconKey==="poke") return `<span class="subIco subIco--svg" aria-hidden="true"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
      <defs>
        <clipPath id="topHalf"><rect x="0" y="0" width="24" height="12"/></clipPath>
        <clipPath id="botHalf"><rect x="0" y="12" width="24" height="12"/></clipPath>
      </defs>
      <!-- Demi-cercle haut rouge -->
      <circle cx="12" cy="12" r="10" fill="#fb7185" clip-path="url(#topHalf)"/>
      <!-- Demi-cercle bas blanc -->
      <circle cx="12" cy="12" r="10" fill="#f8fafc" clip-path="url(#botHalf)"/>
      <!-- Contour global -->
      <circle cx="12" cy="12" r="10" fill="none" stroke="#1e1e2e" stroke-width="1.8"/>
      <!-- Bande centrale -->
      <line x1="2" y1="12" x2="22" y2="12" stroke="#1e1e2e" stroke-width="2"/>
      <!-- Bouton central -->
      <circle cx="12" cy="12" r="3.5" fill="white" stroke="#1e1e2e" stroke-width="1.8"/>
      <circle cx="12" cy="12" r="1.5" fill="#fb7185" opacity="0.8"/>
      <!-- Reflet -->
      <ellipse cx="8.5" cy="7.5" rx="2.2" ry="1.2" fill="white" opacity="0.35" transform="rotate(-20,8.5,7.5)"/>
    </svg></span>`;

    // Sous-ic√¥ne g√©n√©rique cin√©ma/musique/jeux ‚Äî fallback emoji propre
    const emoji = SUBICON[iconKey] || iconKey || "‚Ä¢";
    return `<span class="subIco" aria-hidden="true">${emoji}</span>`;
  }

  // ‚îÄ‚îÄ S√©lection ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function clearSelection(){
    document.querySelectorAll(".card").forEach(c => c.classList.remove("selected"));
    selectedFile = null;
    selectedKey  = null;
    btnGo.disabled = true;
    dockTitle.textContent = "‚Äî";
    dockTitle.classList.remove("show");
    dockHint.classList.remove("show");
  }

  function launch(){
    if (!selectedFile) return;
    // ‚úÖ Marquer comme jou√© dans localStorage
    playedSet.add(selectedKey);
    try { localStorage.setItem("quizPlayed", JSON.stringify([...playedSet])); } catch{}
    location.href = selectedFile;
  }

  function selectCard(cardEl, quiz){
    clearSelection();
    cardEl.classList.add("selected");
    selectedFile = quiz.file;
    selectedKey  = quiz.key;
    btnGo.disabled = false;

    // ‚úÖ Afficher nom dans dock
    dockTitle.textContent = quiz.title;
    dockTitle.classList.add("show");
    dockHint.classList.add("show");

    cardEl.scrollIntoView({ behavior:"smooth", block:"nearest" });
  }

  // ‚îÄ‚îÄ Render ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function renderSubSection(catWrap, subTitle, subIconKey, items){
    if (!items.length) return;

    const subWrap = document.createElement("div");
    subWrap.className = "subWrap";

    const subHead = document.createElement("div");
    subHead.className = "subHead";
    subHead.innerHTML = `
      <div class="subLeft">
        ${subIconHTML(subIconKey)}
        <div class="subTitle">${subTitle}</div>
      </div>
      <div class="subCount">${items.length} quiz</div>
    `;

    const grid = document.createElement("div");
    grid.className = "grid";

    items.forEach(q => {
      const card = document.createElement("div");
      card.className = "card";
      card.setAttribute("role", "button");
      card.setAttribute("tabindex", "0");
      card.dataset.key = q.key;

      // ‚úÖ Badge "D√©j√† jou√©"
      const isPlayed = playedSet.has(q.key);
      if (isPlayed) card.classList.add("played");

      card.innerHTML = `
        <span class="playedBadge">‚úÖ D√©j√† jou√©</span>
        ${cardFlagHTML(q.country)}
        <div class="cTitle">${formatTitleHTML(q.title)}</div>
        <div class="cDesc">${q.desc || ""}</div>
      `;

      // ‚úÖ Simple clic ‚Üí s√©lection
      card.addEventListener("click", () => selectCard(card, q));

      // ‚úÖ Double-clic ‚Üí lancement direct
      card.addEventListener("dblclick", () => {
        selectCard(card, q);
        launch();
      });

      // ‚úÖ Clavier : Entr√©e s√©lectionne, Entr√©e une 2e fois lance
      card.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          if (selectedKey === q.key) {
            // D√©j√† s√©lectionn√© ‚Üí lancer
            launch();
          } else {
            selectCard(card, q);
          }
        }
      });

      grid.appendChild(card);
    });

    subWrap.appendChild(subHead);
    subWrap.appendChild(grid);
    catWrap.appendChild(subWrap);
  }

  function buildCatFilter(){
    catFilter.innerHTML = [
      { value:"all", label:"Toutes" },
      ...CATS.map(c => ({ value:c.id, label:c.title }))
    ].map(o => `<option value="${o.value}">${o.label}</option>`).join("");
  }

  function renderSections(){
    const selectedCat = catFilter.value || "all";
    const searchRaw   = searchInput.value.trim();
    const searchNorm  = normalizeSearch(searchRaw);

    clearSelection();
    sections.innerHTML = "";

    let visibleQuizzes = (selectedCat === "all")
      ? QUIZZES
      : QUIZZES.filter(q => q.cat === selectedCat);

    // ‚úÖ Filtrage par recherche
    if (searchNorm) {
      visibleQuizzes = visibleQuizzes.filter(q =>
        normalizeSearch(q.title).includes(searchNorm) ||
        normalizeSearch(q.desc || "").includes(searchNorm)
      );
    }

    // Toggle bouton clear
    searchClear.classList.toggle("show", searchRaw.length > 0);

    const total = visibleQuizzes.length;
    filtersMeta.textContent = `${total} quiz affich√©${total>1?"s":""}`;

    // Message aucun r√©sultat
    noResults.classList.toggle("show", total === 0);

    const catsToRender = (selectedCat === "all")
      ? CATS
      : CATS.filter(c => c.id === selectedCat);

    catsToRender.forEach(cat => {
      const catItems = visibleQuizzes.filter(q => q.cat === cat.id);
      if (!catItems.length) return;

      const catWrap = document.createElement("div");
      catWrap.className = "cat";
      catWrap.dataset.cat = cat.id;

      const head = document.createElement("div");
      head.className = "catHead";
      head.innerHTML = `
        <div class="catLeft">
          ${catIconHTML(cat.icon)}
          <div class="catTitle">${cat.title}</div>
        </div>
        <div class="catCount">${catItems.length} quiz</div>
      `;
      catWrap.appendChild(head);

      const subDefs = SUBCATS[cat.id] || [];
      const seen = new Set();

      subDefs.forEach(sub => {
        const items = catItems.filter(q => q.sub === sub.id);
        if (!items.length) return;
        seen.add(sub.id);
        renderSubSection(catWrap, sub.title, sub.icon || sub.id, items);
      });

      const otherItems = catItems.filter(q => !q.sub || !seen.has(q.sub));
      if (otherItems.length && subDefs.length){
        renderSubSection(catWrap, "Autres", "dot", otherItems);
      } else if (otherItems.length && !subDefs.length){
        renderSubSection(catWrap, "Quiz", "dot", otherItems);
      }

      sections.appendChild(catWrap);
    });
  }

  // ‚îÄ‚îÄ √âv√©nements ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  buildCatFilter();
  renderSections();

  catFilter.addEventListener("change", renderSections);

  // ‚úÖ Recherche temps r√©el
  searchInput.addEventListener("input", renderSections);
  searchClear.addEventListener("click", () => {
    searchInput.value = "";
    searchInput.focus();
    renderSections();
  });

  btnGo.addEventListener("click", launch);
</script>

</body>
</html>